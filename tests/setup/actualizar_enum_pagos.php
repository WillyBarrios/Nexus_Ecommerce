<?php

/**
 * Actualizar ENUM de metodo_pago para incluir 'stripe'
 */

require __DIR__.'/../../vendor/autoload.php';

$app = require_once __DIR__.'/../../bootstrap/app.php';
$kernel = $app->make(Illuminate\Contracts\Console\Kernel::class);
$kernel->bootstrap();

use Illuminate\Support\Facades\DB;

echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
echo "â•‘     ACTUALIZAR TABLA PAGOS PARA INCLUIR STRIPE              â•‘\n";
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n";

try {
    echo "ğŸ”§ Actualizando columna metodo_pago...\n\n";
    
    DB::statement("
        ALTER TABLE pagos 
        MODIFY COLUMN metodo_pago 
        ENUM('tarjeta','efectivo','transferencia','paypal','stripe') 
        NOT NULL
    ");
    
    echo "âœ… Columna actualizada exitosamente\n\n";
    
    echo "ğŸ“Š MÃ©todos de pago ahora soportados:\n";
    echo "   - tarjeta\n";
    echo "   - efectivo\n";
    echo "   - transferencia\n";
    echo "   - paypal\n";
    echo "   - stripe â† NUEVO\n\n";
    
    echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n";
    echo "â•‘  âœ… ACTUALIZACIÃ“N COMPLETADA                                â•‘\n";
    echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n";
    
} catch (\Exception $e) {
    echo "âŒ ERROR: " . $e->getMessage() . "\n\n";
}
